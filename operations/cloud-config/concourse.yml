---
- type: replace
  path: /networks/name=concourse?
  value:
    name: concourse
    type: manual
    subnets:
    - range: ((concourse_subnet_az1_cidr))
      gateway: ((concourse_subnet_az1_gateway))
      az: z1
      dns:
      - ((private_dns_nameserver))
      - 1.1.1.1
      reserved: [((reserved_concourse_az1_cidr))]
      cloud_properties:
        subnet: ((concourse_subnet_az1_id))
        security_groups: [ ((concourse_security_group))]

- type: replace
  path: /vm_types/-
  value:
    name: concourse
    network: concourse
    cloud_properties:
      instance_type: c5.large
      ephemeral_disk:
        size: 100_000
        type: gp2

- type: replace
  path: /vm_extensions/-
  value:
    name: concourse_web
    cloud_properties:
      lb_target_groups: [((concourse_alb_target_group))]

- type: replace
  path: /vm_extensions/-
  value:
    name: concourse-worker
    cloud_properties:
      iam_instance_profile: ((concourse_worker_iam_profile))         